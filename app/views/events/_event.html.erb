<%
  title = event.display_name
  title = "#{event.programs.first.name} #{title}" if event.programs.count == 1

  start = event.f_start_date
  finish = event.f_end_date
  date_text = start.pretty_print(no_relative_dates: true)
  if(start != finish)
    date_text += ' ' + t(:to) + ' ' + finish.pretty_print(no_relative_dates: true)
  end

  programs_text = event.programs.collect{|p| p.name}.join(', ')

  people_text = event.people.collect{|p| p.full_name}.join(', ')
%>

<div class="panel panel-info" id="event-panel-<%= event.id %>">
  <div class="panel-heading">
    <span class="h5 panel-title dulu-panel-title">
      <%= title %>
    </span>
    <span style="float: right">
      <%= link_to t(:Edit), edit_event_path(event, referred_by: request.path) if can?(:update, event) %>
    </span>
  </div>
  <div class="panel-body">
    <p><strong><%= date_text %></strong></p>
    <p>
      <% unless event.programs.empty? %>
        <% event.programs.each do |program| %>
          <%= link_to program.name, dashboard_program_path(program) %><%= ',' unless program == event.programs.last %>
        <% end %><br>
      <% end %>
      <% event.people.each do |person| %>
        <%= link_to person.full_name, person %><%= ',' unless person == event.people.last %>
      <% end %>
    </p>
    <p>
      <%= event.note %>
    </p>
  </div>
</div>