<%= render 'programs/sidebar' do %>
  <h2><%= t :Publications %></h2>

  <% if can? :create, @program.publications.new %>
    <%= link_to t(:Add_publication), new_program_publication_path, class: 'btn btn-primary' %>
  <% end %>

  <% if @publications.empty? %>
    <h3><%= t :No_publications %></h3>
  <% end %>

  <% Publication.kinds.each do |kind| %>
    <% kind_pubs = @publications.select{ |pub| pub.kind==kind } %>
    <% unless kind_pubs.empty? %>
      <h3><%= t kind %></h3>
      <table class="table auto-width" style="margin-left: 20px;">
        <% kind_pubs.each do |pub| %>
          <tr>
            <td>
              <span class="bigger">
                <%= pub.name %>
                <%= " - #{pub.year}" if pub.year %>
              </span>
            </td>
            <td>
              <%= link_to t(:Edit), edit_publication_path(pub) if can? :update, pub %>
            </td>
          </tr>
        <% end %>
      </table>
    <% end %>
  <% end %>
<% end %>